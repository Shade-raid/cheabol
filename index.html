<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì¬ë²Œ ì œêµ­ / Chaebol Empire: 1948â€“2026</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&family=Noto+Sans+KR:wght@300;500;700;900&family=Bebas+Neue&display=swap" rel="stylesheet">
<style>
:root {
  --primary: #1a1a2e;
  --secondary: #c41e3a;
  --accent: #ffd700;
  --bg-light: #f5f5dc;
  --text: #2d2d2d;
  --crisis: #8b0000;
  --success: #2d5016;
  --shadow: rgba(0,0,0,0.15);
  --pattern-opacity: 0.03;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Noto Sans KR', sans-serif;
  background: var(--bg-light);
  color: var(--text);
  min-height: 100vh;
  position: relative;
  overflow-x: hidden;
}

/* Korean traditional pattern background */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    repeating-linear-gradient(45deg, transparent, transparent 35px, rgba(196, 30, 58, var(--pattern-opacity)) 35px, rgba(196, 30, 58, var(--pattern-opacity)) 70px),
    repeating-linear-gradient(-45deg, transparent, transparent 35px, rgba(26, 26, 46, var(--pattern-opacity)) 35px, rgba(26, 26, 46, var(--pattern-opacity)) 70px);
  z-index: -1;
  opacity: 0.4;
}

.header {
  background: linear-gradient(135deg, var(--primary) 0%, #16213e 100%);
  color: white;
  padding: 1.5rem 2rem;
  box-shadow: 0 4px 20px var(--shadow);
  position: relative;
  overflow: hidden;
}

.header::after {
  content: 'å¤ªæ¥µ';
  position: absolute;
  right: -50px;
  top: -30px;
  font-size: 150px;
  font-family: 'Nanum Myeongjo', serif;
  opacity: 0.05;
  font-weight: 800;
}

.header-content {
  max-width: 1400px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 1rem;
}

.title-group h1 {
  font-family: 'Nanum Myeongjo', serif;
  font-size: 2.5rem;
  font-weight: 800;
  letter-spacing: -1px;
  margin-bottom: 0.25rem;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.title-group .subtitle {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 1.1rem;
  letter-spacing: 2px;
  opacity: 0.85;
  font-weight: 400;
}

.lang-toggle {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.2);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 20px;
  cursor: pointer;
  font-family: 'Noto Sans KR', sans-serif;
  font-size: 0.9rem;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.lang-toggle:hover {
  background: rgba(255,255,255,0.2);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

.stats-bar {
  background: white;
  padding: 1.5rem 2rem;
  box-shadow: 0 2px 15px var(--shadow);
  border-left: 5px solid var(--secondary);
}

.stats-content {
  max-width: 1400px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 2rem;
}

.stat-item {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.stat-label {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  opacity: 0.6;
  font-weight: 500;
}

.stat-value {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 2rem;
  letter-spacing: 1px;
  line-height: 1;
}

.stat-value.money {
  color: var(--success);
  font-size: 2.5rem;
}

.stat-value.year {
  color: var(--primary);
}

.stat-value.era {
  color: var(--secondary);
  font-size: 1.5rem;
}

.crisis-banner {
  background: linear-gradient(135deg, var(--crisis) 0%, #5a0000 100%);
  color: white;
  padding: 1rem 2rem;
  text-align: center;
  font-weight: 700;
  letter-spacing: 1px;
  animation: pulse 1.5s ease-in-out infinite;
  box-shadow: inset 0 -3px 0 rgba(0,0,0,0.3);
  display: none;
}

.crisis-banner.active {
  display: block;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.85; }
}

.main-content {
  max-width: 1400px;
  margin: 2rem auto;
  padding: 0 2rem;
  display: grid;
  grid-template-columns: 1fr 2fr;
  gap: 2rem;
}

.panel {
  background: white;
  border-radius: 8px;
  padding: 2rem;
  box-shadow: 0 4px 20px var(--shadow);
  border-top: 4px solid var(--secondary);
}

.panel h2 {
  font-family: 'Nanum Myeongjo', serif;
  font-size: 1.5rem;
  margin-bottom: 1.5rem;
  color: var(--primary);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.panel h2::before {
  content: 'â–ª';
  color: var(--secondary);
  font-size: 1.2rem;
}

.hustle-btn {
  width: 100%;
  padding: 1.5rem;
  background: linear-gradient(135deg, var(--secondary) 0%, #a01828 100%);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 1.1rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 4px 15px rgba(196, 30, 58, 0.3);
  font-family: 'Noto Sans KR', sans-serif;
  position: relative;
  overflow: hidden;
}

.hustle-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s ease;
}

.hustle-btn:hover::before {
  left: 100%;
}

.hustle-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(196, 30, 58, 0.4);
}

.hustle-btn:active {
  transform: translateY(0);
}

.producer-grid {
  display: grid;
  gap: 1rem;
}

.producer-card {
  background: linear-gradient(135deg, #fafafa 0%, #f0f0f0 100%);
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  padding: 1rem 1.25rem;
  transition: all 0.3s ease;
  cursor: pointer;
  position: relative;
  overflow: hidden;
}

.producer-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  height: 100%;
  background: var(--secondary);
  transform: scaleY(0);
  transition: transform 0.3s ease;
}

.producer-card:hover::before {
  transform: scaleY(1);
}

.producer-card.locked {
  opacity: 0.4;
  cursor: not-allowed;
  background: linear-gradient(135deg, #f5f5f5 0%, #ebebeb 100%);
}

.producer-card.locked::after {
  content: 'ğŸ”’';
  position: absolute;
  right: 1rem;
  top: 50%;
  transform: translateY(-50%);
  font-size: 1.5rem;
}

.producer-card:not(.locked):hover {
  transform: translateX(8px);
  border-color: var(--secondary);
  box-shadow: -4px 4px 15px var(--shadow);
}

.producer-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

.producer-name {
  font-weight: 700;
  font-size: 1.1rem;
  color: var(--primary);
  font-family: 'Noto Sans KR', sans-serif;
}

.producer-owned {
  background: var(--primary);
  color: white;
  padding: 0.25rem 0.75rem;
  border-radius: 12px;
  font-size: 0.85rem;
  font-weight: 700;
  font-family: 'Bebas Neue', sans-serif;
  letter-spacing: 1px;
}

.producer-stats {
  display: flex;
  justify-content: space-between;
  font-size: 0.9rem;
  color: #666;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.producer-cost {
  color: var(--secondary);
  font-weight: 600;
}

.producer-output {
  color: var(--success);
  font-weight: 600;
}

.info-section {
  margin-top: 1.5rem;
  padding: 1rem;
  background: linear-gradient(135deg, #f8f8f8 0%, #efefef 100%);
  border-radius: 6px;
  font-size: 0.9rem;
  line-height: 1.6;
}

.info-section strong {
  color: var(--secondary);
}

.tooltip {
  position: fixed;
  background: rgba(26, 26, 46, 0.95);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  font-size: 0.85rem;
  pointer-events: none;
  z-index: 1000;
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  display: none;
}

@media (max-width: 900px) {
  .main-content {
    grid-template-columns: 1fr;
  }
  
  .header-content {
    flex-direction: column;
    text-align: center;
  }
  
  .title-group h1 {
    font-size: 2rem;
  }
}

/* Click feedback animation */
@keyframes click-feedback {
  0% { transform: scale(1); }
  50% { transform: scale(0.95); }
  100% { transform: scale(1); }
}

.clicked {
  animation: click-feedback 0.2s ease;
}

/* Number popup animation */
@keyframes float-up {
  0% { 
    opacity: 1;
    transform: translateY(0);
  }
  100% { 
    opacity: 0;
    transform: translateY(-50px);
  }
}

.money-popup {
  position: fixed;
  font-family: 'Bebas Neue', sans-serif;
  font-size: 1.5rem;
  color: var(--success);
  pointer-events: none;
  animation: float-up 1s ease-out forwards;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
  z-index: 999;
}

/* Unlock animation */
@keyframes unlock {
  0% { 
    opacity: 0;
    transform: translateY(20px) scale(0.8);
  }
  60% {
    transform: translateY(-5px) scale(1.05);
  }
  100% { 
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.newly-unlocked {
  animation: unlock 0.6s ease-out;
}

/* Main Menu Styles */
.main-menu {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, var(--primary) 0%, #0f3460 50%, var(--secondary) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  opacity: 1;
  transition: opacity 0.5s ease;
}

.main-menu.hidden {
  opacity: 0;
  pointer-events: none;
}

.menu-content {
  text-align: center;
  color: white;
  max-width: 600px;
  padding: 2rem;
  position: relative;
}

.menu-title {
  font-family: 'Nanum Myeongjo', serif;
  font-size: 4rem;
  font-weight: 800;
  margin-bottom: 0.5rem;
  text-shadow: 4px 4px 8px rgba(0,0,0,0.5);
  letter-spacing: -2px;
  animation: title-glow 3s ease-in-out infinite;
}

.menu-subtitle {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 1.5rem;
  letter-spacing: 4px;
  margin-bottom: 0.5rem;
  opacity: 0.9;
}

.menu-tagline {
  font-size: 1rem;
  margin-bottom: 2rem;
  opacity: 0.7;
  font-weight: 300;
}

.menu-description {
  background: rgba(0,0,0,0.2);
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 2rem;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.1);
}

.menu-description p {
  margin: 0;
  font-size: 0.95rem;
  line-height: 1.6;
  opacity: 0.9;
}

.prototype-notice {
  margin-top: 1rem !important;
  padding-top: 1rem;
  border-top: 1px solid rgba(255,255,255,0.2);
  font-size: 0.85rem !important;
  color: var(--accent);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
}

@keyframes title-glow {
  0%, 100% { 
    text-shadow: 4px 4px 8px rgba(0,0,0,0.5), 0 0 20px rgba(255,215,0,0.3);
  }
  50% { 
    text-shadow: 4px 4px 8px rgba(0,0,0,0.5), 0 0 40px rgba(255,215,0,0.5);
  }
}

.menu-buttons {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 2rem;
}

.menu-btn {
  background: rgba(255,255,255,0.1);
  border: 2px solid rgba(255,255,255,0.3);
  color: white;
  padding: 1.25rem 2rem;
  font-size: 1.1rem;
  font-weight: 700;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: 'Noto Sans KR', sans-serif;
  backdrop-filter: blur(10px);
  position: relative;
  overflow: hidden;
}

.menu-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
  transition: left 0.6s ease;
}

.menu-btn:hover::before {
  left: 100%;
}

.menu-btn:hover {
  background: rgba(255,255,255,0.2);
  border-color: rgba(255,255,255,0.5);
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.3);
}

.menu-btn.primary {
  background: linear-gradient(135deg, var(--secondary) 0%, #a01828 100%);
  border-color: var(--accent);
  box-shadow: 0 4px 20px rgba(196, 30, 58, 0.4);
}

.menu-btn.primary:hover {
  background: linear-gradient(135deg, #d42843 0%, var(--secondary) 100%);
  box-shadow: 0 8px 30px rgba(196, 30, 58, 0.6);
}

.menu-btn-subtitle {
  display: block;
  font-size: 0.8rem;
  opacity: 0.7;
  font-weight: 400;
  margin-top: 0.25rem;
}

.difficulty-selector {
  margin-top: 1rem;
  padding: 1.5rem;
  background: rgba(0,0,0,0.3);
  border-radius: 8px;
  backdrop-filter: blur(10px);
}

.difficulty-title {
  font-size: 0.9rem;
  margin-bottom: 1rem;
  opacity: 0.8;
  text-transform: uppercase;
  letter-spacing: 2px;
}

.difficulty-options {
  display: flex;
  gap: 0.75rem;
  justify-content: center;
}

.difficulty-btn {
  background: rgba(255,255,255,0.1);
  border: 2px solid rgba(255,255,255,0.2);
  color: white;
  padding: 0.75rem 1.5rem;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 600;
  transition: all 0.3s ease;
  font-family: 'Noto Sans KR', sans-serif;
}

.difficulty-btn:hover {
  background: rgba(255,255,255,0.2);
  border-color: rgba(255,255,255,0.4);
}

.difficulty-btn.selected {
  background: var(--accent);
  border-color: var(--accent);
  color: var(--primary);
}

.menu-decorative {
  position: absolute;
  font-family: 'Nanum Myeongjo', serif;
  font-size: 200px;
  opacity: 0.03;
  font-weight: 800;
  pointer-events: none;
  z-index: -1;
}

.menu-decorative.left {
  left: -80px;
  top: 50%;
  transform: translateY(-50%);
}

.menu-decorative.right {
  right: -80px;
  top: 50%;
  transform: translateY(-50%) rotate(180deg);
}

.game-container {
  opacity: 0;
  transition: opacity 0.5s ease;
}

.game-container.visible {
  opacity: 1;
}

@media (max-width: 600px) {
  .menu-title {
    font-size: 2.5rem;
  }
  
  .menu-subtitle {
    font-size: 1.2rem;
  }
  
  .difficulty-options {
    flex-direction: column;
  }
  
  .menu-decorative {
    display: none;
  }
}
</style>
</head>
<body>

<!-- Main Menu -->
<div class="main-menu" id="mainMenu">
  <div class="menu-decorative left">è²¡</div>
  <div class="menu-decorative right">é–¥</div>
  <div class="menu-content">
    <h1 class="menu-title" data-ko="ì¬ë²Œ ì œêµ­" data-en="CHAEBOL EMPIRE">ì¬ë²Œ ì œêµ­</h1>
    <div class="menu-subtitle" data-ko="1948â€“2026" data-en="1948â€“2026">1948â€“2026</div>
    <p class="menu-tagline" data-ko="íí—ˆì—ì„œ ì‹œì‘í•˜ì—¬ ì œêµ­ì„ ê±´ì„¤í•˜ë¼" data-en="Build an empire from the ashes">íí—ˆì—ì„œ ì‹œì‘í•˜ì—¬ ì œêµ­ì„ ê±´ì„¤í•˜ë¼</p>
    
    <div class="menu-description">
      <p data-ko="ì „ìŸì˜ ì¿ë”ë¯¸ì—ì„œ ì‹œì‘í•´ í•œêµ­ ìµœëŒ€ ì¬ë²Œë¡œ ì„±ì¥í•˜ì„¸ìš”. ì‚°ì—…í™”, ê²½ì œ ìœ„ê¸°, ê·¸ë¦¬ê³  ì„¸ê³„í™”ì˜ ë¬¼ê²° ì†ì—ì„œ ì‚´ì•„ë‚¨ìœ¼ì„¸ìš”." 
         data-en="Rise from post-war ruins to build Korea's greatest conglomerate. Survive industrialization, economic crises, and globalization.">
        ì „ìŸì˜ ì¿ë”ë¯¸ì—ì„œ ì‹œì‘í•´ í•œêµ­ ìµœëŒ€ ì¬ë²Œë¡œ ì„±ì¥í•˜ì„¸ìš”. ì‚°ì—…í™”, ê²½ì œ ìœ„ê¸°, ê·¸ë¦¬ê³  ì„¸ê³„í™”ì˜ ë¬¼ê²° ì†ì—ì„œ ì‚´ì•„ë‚¨ìœ¼ì„¸ìš”.
      </p>
      <p class="prototype-notice" data-ko="âš ï¸ í”„ë¡œí† íƒ€ì… ë²„ì „ - ê°œë°œ ì¤‘" data-en="âš ï¸ PROTOTYPE VERSION - IN DEVELOPMENT">
        âš ï¸ í”„ë¡œí† íƒ€ì… ë²„ì „ - ê°œë°œ ì¤‘
      </p>
    </div>
    
    <div class="menu-buttons">
      <button class="menu-btn primary" onclick="startGame()">
        <span data-ko="ê²Œì„ ì‹œì‘" data-en="START GAME">ê²Œì„ ì‹œì‘</span>
        <span class="menu-btn-subtitle" data-ko="ìƒˆë¡œìš´ ì œêµ­ì„ ê±´ì„¤í•˜ì„¸ìš”" data-en="Begin your dynasty">ìƒˆë¡œìš´ ì œêµ­ì„ ê±´ì„¤í•˜ì„¸ìš”</span>
      </button>
      
      <button class="menu-btn" onclick="toggleDifficulty()">
        <span data-ko="ë‚œì´ë„ ì„¤ì •" data-en="DIFFICULTY">ë‚œì´ë„ ì„¤ì •</span>
        <span class="menu-btn-subtitle" id="difficultyLabel" data-ko="í˜„ì¬: ë³´í†µ" data-en="Current: Normal">í˜„ì¬: ë³´í†µ</span>
      </button>
      
      <button class="menu-btn" onclick="toggleLanguageMenu()">
        <span data-ko="ğŸŒ English" data-en="ğŸŒ í•œêµ­ì–´">ğŸŒ English</span>
        <span class="menu-btn-subtitle" data-ko="ì–¸ì–´ ë³€ê²½" data-en="Change Language">ì–¸ì–´ ë³€ê²½</span>
      </button>
    </div>
    
    <div class="difficulty-selector" id="difficultySelector" style="display: none;">
      <div class="difficulty-title" data-ko="ë‚œì´ë„ ì„ íƒ" data-en="SELECT DIFFICULTY">ë‚œì´ë„ ì„ íƒ</div>
      <div class="difficulty-options">
        <button class="difficulty-btn" onclick="setDifficulty('easy')" data-ko="ì‰¬ì›€" data-en="Easy">ì‰¬ì›€</button>
        <button class="difficulty-btn selected" onclick="setDifficulty('normal')" data-ko="ë³´í†µ" data-en="Normal">ë³´í†µ</button>
        <button class="difficulty-btn" onclick="setDifficulty('hard')" data-ko="ì–´ë ¤ì›€" data-en="Hard">ì–´ë ¤ì›€</button>
        <button class="difficulty-btn" onclick="setDifficulty('hell')" data-ko="ì§€ì˜¥" data-en="Hell">ì§€ì˜¥</button>
      </div>
    </div>
  </div>
</div>

<!-- Game Container -->
<div class="game-container" id="gameContainer">

<div class="header">
  <div class="header-content">
    <div class="title-group">
      <h1 data-ko="ì¬ë²Œ ì œêµ­" data-en="Chaebol Empire">ì¬ë²Œ ì œêµ­</h1>
      <div class="subtitle" data-ko="1948â€“2026: íí—ˆì—ì„œ ì œêµ­ìœ¼ë¡œ" data-en="1948â€“2026: FROM RUINS TO EMPIRE">1948â€“2026: íí—ˆì—ì„œ ì œêµ­ìœ¼ë¡œ</div>
    </div>
    <button class="lang-toggle" onclick="toggleLanguage()">
      <span data-ko="ğŸŒ English" data-en="ğŸŒ í•œêµ­ì–´">ğŸŒ English</span>
    </button>
  </div>
</div>

<div class="stats-bar">
  <div class="stats-content">
    <div class="stat-item">
      <div class="stat-label" data-ko="ë³´ìœ  ìê¸ˆ" data-en="CAPITAL">ë³´ìœ  ìê¸ˆ</div>
      <div class="stat-value money">â‚©<span id="money">0</span></div>
    </div>
    <div class="stat-item">
      <div class="stat-label" data-ko="ë‚ ì§œ" data-en="DATE">ë‚ ì§œ</div>
      <div class="stat-value year" id="year">1948 1ì›” 1ì£¼ì°¨</div>
    </div>
    <div class="stat-item">
      <div class="stat-label" data-ko="ì‹œëŒ€" data-en="ERA">ì‹œëŒ€</div>
      <div class="stat-value era" id="era">ì „í›„ ìƒì¡´ê¸°</div>
    </div>
    <div class="stat-item">
      <div class="stat-label" data-ko="ì´ˆë‹¹ ìˆ˜ìµ" data-en="â‚© PER SECOND">ì´ˆë‹¹ ìˆ˜ìµ</div>
      <div class="stat-value">â‚©<span id="tps">0</span>/s</div>
    </div>
  </div>
</div>

<div class="crisis-banner" id="crisisBanner">
  âš  <span id="crisisText"></span>
</div>

<div class="main-content">
  <div class="panel">
    <h2 id="manualIncomeHeader">ìˆ˜ë™ ìˆ˜ìµ</h2>
    <button class="hustle-btn" onclick="clickMoney()" id="hustleBtn" 
            data-ko="ì•…ì°©ê°™ì´ ë²Œê¸° (ë…¸ì ìƒ)" 
            data-en="Hustle Hard (Street Vendor)">
      ì•…ì°©ê°™ì´ ë²Œê¸° (ë…¸ì ìƒ)
    </button>
    
    <div class="info-section">
      <p><strong data-ko="í´ë¦­ ë³´ë„ˆìŠ¤:" data-en="Click Bonus:">í´ë¦­ ë³´ë„ˆìŠ¤:</strong> <span data-ko="ì´ˆë‹¹ ìˆ˜ìµì˜ 10% + ê¸°ë³¸ 1ì›" data-en="10% of TPS + â‚©1 base">ì´ˆë‹¹ ìˆ˜ìµì˜ 10% + ê¸°ë³¸ 1ì›</span></p>
      <p style="margin-top: 0.5rem; font-size: 0.85rem; opacity: 0.8;" data-ko="ğŸ’¡ íŒ: ìœ„ê¸°ëŠ” ê¸°íšŒë‹¤. ìì‚° ê°€ê²©ì´ í­ë½í•  ë•Œ ì‚¬ë“¤ì—¬ë¼." data-en="ğŸ’¡ Tip: Crisis = opportunity. Buy when prices crash.">ğŸ’¡ íŒ: ìœ„ê¸°ëŠ” ê¸°íšŒë‹¤. ìì‚° ê°€ê²©ì´ í­ë½í•  ë•Œ ì‚¬ë“¤ì—¬ë¼.</p>
    </div>
  </div>

  <div class="panel">
    <h2 id="businessDivisionsHeader">ì‚¬ì—… ë¶€ë¬¸</h2>
    <div class="producer-grid" id="producers"></div>
  </div>
</div>

<div class="tooltip" id="tooltip"></div>

</div>
<!-- End Game Container -->

<script>
// Language system
let currentLang = 'ko';
const translations = {
  eras: {
    ko: [
      { name: "ì „í›„ ìƒì¡´ê¸°", start: 1948, end: 1959 },
      { name: "ì‚°ì—…í™” í˜ëª…", start: 1960, end: 1979 },
      { name: "ì¤‘í™”í•™ ê³µì—…", start: 1980, end: 1996 },
      { name: "ì„¸ê³„í™” ì‹œëŒ€", start: 1997, end: 2007 },
      { name: "ê¸ˆìœµÂ·ê¸°ìˆ ", start: 2008, end: 2019 },
      { name: "í›„ê¸° ìë³¸ì£¼ì˜", start: 2020, end: 2026 }
    ],
    en: [
      { name: "Post-War Survival", start: 1948, end: 1959 },
      { name: "Industrialization", start: 1960, end: 1979 },
      { name: "Heavy Industry", start: 1980, end: 1996 },
      { name: "Globalization", start: 1997, end: 2007 },
      { name: "Tech & Finance", start: 2008, end: 2019 },
      { name: "Late Capitalism", start: 2020, end: 2026 }
    ]
  },
  producers: {
    ko: [
      { name:'ì„¬ìœ  ê³µì¥', baseCost:15, cost:15, owned:0, baseProd:1, unlockYear:1948 },
      { name:'ì œì² ì†Œ', baseCost:200, cost:200, owned:0, baseProd:8, unlockYear:1960 },
      { name:'ìë™ì°¨ ì‚¬ì—…ë¶€', baseCost:1500, cost:1500, owned:0, baseProd:50, unlockYear:1980 },
      { name:'ì „ì ê³µì¥', baseCost:20000, cost:20000, owned:0, baseProd:400, unlockYear:1997 },
      { name:'ê¸ˆìœµ ê³„ì—´ì‚¬', baseCost:250000, cost:250000, owned:0, baseProd:3000, unlockYear:2008 },
      { name:'í”Œë«í¼/AI', baseCost:1e7, cost:1e7, owned:0, baseProd:50000, unlockYear:2020 }
    ],
    en: [
      { name:'Textile Mill', baseCost:15, cost:15, owned:0, baseProd:1, unlockYear:1948 },
      { name:'Steel Works', baseCost:200, cost:200, owned:0, baseProd:8, unlockYear:1960 },
      { name:'Auto Division', baseCost:1500, cost:1500, owned:0, baseProd:50, unlockYear:1980 },
      { name:'Electronics', baseCost:20000, cost:20000, owned:0, baseProd:400, unlockYear:1997 },
      { name:'Finance Arm', baseCost:250000, cost:250000, owned:0, baseProd:3000, unlockYear:2008 },
      { name:'Platform/AI', baseCost:1e7, cost:1e7, owned:0, baseProd:50000, unlockYear:2020 }
    ]
  },
  crises: {
    ko: [
      { year: 1997, duration: 4, severity: 0.5, message: "IMF ì™¸í™˜ìœ„ê¸°! ìˆ˜ìµ ì ˆë°˜, ìê¸ˆ 60% ì¦ë°œ!" },
      { year: 2008, duration: 3, severity: 0.7, message: "ì„¸ê³„ ê¸ˆìœµìœ„ê¸°! ê¸ˆìœµì‚¬ íƒ€ê²©!" },
      { year: 2020, duration: 2, severity: 0.75, message: "ê³µê¸‰ë§ ì¶©ê²©! ì œì¡°ì—… ìœ„ì¶•!" }
    ],
    en: [
      { year: 1997, duration: 4, severity: 0.5, message: "IMF Crisis! Income halved, 60% capital loss!" },
      { year: 2008, duration: 3, severity: 0.7, message: "Global Financial Crisis! Finance hit hard!" },
      { year: 2020, duration: 2, severity: 0.75, message: "Supply Chain Shock! Manufacturing slowed!" }
    ]
  },
  ratings: {
    ko: {
      titles: {
        "Untouchable Dynasty": "ë¶ˆíŒ¨ì˜ ì¬ë²Œ",
        "Crisis Predator": "ìœ„ê¸°ì˜ í¬ì‹ì",
        "Balanced Conglomerate": "ê· í˜•ì¡íŒ ëŒ€ê¸°ì—…",
        "Industrial Titan": "ì‚°ì—… ê±°ì¸",
        "Fragile Empire": "ì·¨ì•½í•œ ì œêµ­"
      },
      labels: {
        growth: "ì„±ì¥ë ¥",
        efficiency: "íš¨ìœ¨ì„±",
        crisis: "ìœ„ê¸° ëŒ€ì‘",
        diversification: "ë‹¤ê°í™”"
      }
    },
    en: {
      titles: {
        "Untouchable Dynasty": "Untouchable Dynasty",
        "Crisis Predator": "Crisis Predator",
        "Balanced Conglomerate": "Balanced Conglomerate",
        "Industrial Titan": "Industrial Titan",
        "Fragile Empire": "Fragile Empire"
      },
      labels: {
        growth: "Growth",
        efficiency: "Efficiency",
        crisis: "Crisis Handling",
        diversification: "Diversification"
      }
    }
  }
};

function toggleLanguage() {
  currentLang = currentLang === 'ko' ? 'en' : 'ko';
  
  // Update all translatable elements
  document.querySelectorAll('[data-ko][data-en]').forEach(el => {
    const text = el.getAttribute('data-' + currentLang);
    if (text) {
      el.textContent = text;
    }
  });
  
  // Manually update h2 headers
  document.getElementById('manualIncomeHeader').textContent = currentLang === 'ko' ? 'ìˆ˜ë™ ìˆ˜ìµ' : 'Manual Income';
  document.getElementById('businessDivisionsHeader').textContent = currentLang === 'ko' ? 'ì‚¬ì—… ë¶€ë¬¸' : 'Business Divisions';
  
  // Update producers array with new language
  const oldProducers = producers;
  producers = JSON.parse(JSON.stringify(translations.producers[currentLang]));
  
  // Preserve ownership and costs
  producers.forEach((p, i) => {
    if (oldProducers[i]) {
      p.owned = oldProducers[i].owned;
      p.cost = oldProducers[i].cost;
    }
  });
  
  updateDifficultyLabel();
  if (gameStarted) updateDisplay();
}

function toggleLanguageMenu() {
  toggleLanguage();
}

// Menu and difficulty system
let gameStarted = false;
let difficulty = 'normal';
const difficultySettings = {
  easy: {
    costMultiplier: 1.12,
    productionMultiplier: 1.08,
    timeMultiplier: 0.018,
    crisisImpact: 0.8,
    labels: { ko: 'ì‰¬ì›€', en: 'Easy' }
  },
  normal: {
    costMultiplier: 1.15,
    productionMultiplier: 1.06,
    timeMultiplier: 0.012,
    crisisImpact: 1.0,
    labels: { ko: 'ë³´í†µ', en: 'Normal' }
  },
  hard: {
    costMultiplier: 1.18,
    productionMultiplier: 1.04,
    timeMultiplier: 0.008,
    crisisImpact: 1.3,
    labels: { ko: 'ì–´ë ¤ì›€', en: 'Hard' }
  },
  hell: {
    costMultiplier: 1.22,
    productionMultiplier: 1.03,
    timeMultiplier: 0.005,
    crisisImpact: 1.6,
    labels: { ko: 'ì§€ì˜¥', en: 'Hell' }
  }
};

function toggleDifficulty() {
  const selector = document.getElementById('difficultySelector');
  selector.style.display = selector.style.display === 'none' ? 'block' : 'none';
}

function setDifficulty(level) {
  difficulty = level;
  document.querySelectorAll('.difficulty-btn').forEach(btn => {
    btn.classList.remove('selected');
  });
  event.target.classList.add('selected');
  updateDifficultyLabel();
}

function updateDifficultyLabel() {
  const label = document.getElementById('difficultyLabel');
  const prefix = currentLang === 'ko' ? 'í˜„ì¬: ' : 'Current: ';
  label.textContent = prefix + difficultySettings[difficulty].labels[currentLang];
  label.setAttribute('data-ko', 'í˜„ì¬: ' + difficultySettings[difficulty].labels.ko);
  label.setAttribute('data-en', 'Current: ' + difficultySettings[difficulty].labels.en);
}

function startGame() {
  gameStarted = true;
  document.getElementById('mainMenu').classList.add('hidden');
  setTimeout(() => {
    document.getElementById('gameContainer').classList.add('visible');
    startGameLoop();
  }, 500);
}

// Game state
let money = 0, tps = 0;
let globalMultiplier = 1;
let crisisMultiplier = 1;
let boughtDuringCrisis = 0;
let totalMoneyEarned = 0;
let peakTPS = 0;
let totalProducersOwned = 0;
let crisisActive = false;
let gameOver = false;

let startYear = 1948, endYear = 2026, currentYear = startYear;
let currentMonth = 1; // 1-12
let currentWeek = 1; // 1-4
let secondsPerWeek = 1; // 1 second per week = 4 seconds per month = 48 seconds per year
let crisisEndYear = 0;

const monthNames = {
  ko: ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”', '7ì›”', '8ì›”', '9ì›”', '10ì›”', '11ì›”', '12ì›”'],
  en: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
};

function getFormattedDate() {
  const monthName = monthNames[currentLang][currentMonth - 1];
  const weekLabel = currentLang === 'ko' ? `${currentWeek}ì£¼ì°¨` : `Wk ${currentWeek}`;
  return `${currentYear} ${monthName} ${weekLabel}`;
}

let producers = JSON.parse(JSON.stringify(translations.producers[currentLang]));

function getEra() {
  return translations.eras[currentLang].find(e => currentYear >= e.start && currentYear <= e.end);
}

function producerOutput(p) {
  // Smoother exponential scaling based on difficulty
  const settings = difficultySettings[difficulty];
  return p.baseProd * p.owned * Math.pow(settings.productionMultiplier, p.owned) * globalMultiplier * crisisMultiplier;
}

function calculateTPS() {
  let total = 0;
  producers.forEach(p => total += producerOutput(p));
  peakTPS = Math.max(peakTPS, total);
  totalProducersOwned = producers.reduce((sum,p)=>sum+p.owned,0);
  return total;
}

function clickMoney() {
  let gain = 1 + tps * 0.1;
  money += gain;
  totalMoneyEarned += gain;
  
  // Visual feedback
  document.getElementById('hustleBtn').classList.add('clicked');
  setTimeout(() => document.getElementById('hustleBtn').classList.remove('clicked'), 200);
  
  // Floating number
  showMoneyPopup(gain);
  
  updateMoneyDisplay();
}

function showMoneyPopup(amount) {
  const popup = document.createElement('div');
  popup.className = 'money-popup';
  popup.textContent = '+â‚©' + formatNumber(amount);
  
  const btn = document.getElementById('hustleBtn');
  const rect = btn.getBoundingClientRect();
  popup.style.left = (rect.left + rect.width / 2 - 30) + 'px';
  popup.style.top = (rect.top - 10) + 'px';
  
  document.body.appendChild(popup);
  setTimeout(() => popup.remove(), 1000);
}

function buy(i) {
  let p = producers[i];
  if (currentYear < p.unlockYear) return;
  if (money >= p.cost) {
    money -= p.cost;
    p.owned++;
    tps = calculateTPS();
    const settings = difficultySettings[difficulty];
    p.cost = Math.floor(p.baseCost * Math.pow(settings.costMultiplier, p.owned));
    if (crisisActive) boughtDuringCrisis++;
    updateDisplay();
  }
}

function timeMultiplier() {
  const settings = difficultySettings[difficulty];
  return 1 + (currentYear - 1948) * settings.timeMultiplier;
}

function checkCrisis() {
  const crises = translations.crises[currentLang];
  crises.forEach(c => {
    if (currentYear === c.year && !crisisActive) startCrisis(c);
  });
  if (crisisActive && currentYear > crisisEndYear) endCrisis();
}

function startCrisis(c) {
  crisisActive = true;
  const settings = difficultySettings[difficulty];
  crisisMultiplier = c.severity * settings.crisisImpact;
  crisisEndYear = c.year + c.duration - 1;
  
  if(c.year === 1997) {
    const moneyLoss = difficulty === 'hell' ? 0.25 : difficulty === 'hard' ? 0.35 : 0.4;
    money *= moneyLoss;
  }
  
  const banner = document.getElementById('crisisBanner');
  document.getElementById('crisisText').textContent = c.message;
  banner.classList.add('active');
}

function endCrisis() {
  crisisActive = false;
  crisisMultiplier = 1;
  document.getElementById('crisisBanner').classList.remove('active');
}

function showFinalRatings() {
  function growthRating() {
    if (money >= 1e90) return "S";
    if (money >= 1e60) return "A";
    if (money >= 1e40) return "B";
    if (money >= 1e20) return "C";
    return "D";
  }

  function efficiencyRating() {
    let efficiency = peakTPS / (totalProducersOwned + 1);
    if (efficiency > 1e6) return "S";
    if (efficiency > 1e4) return "A";
    if (efficiency > 1e2) return "B";
    return "C";
  }

  function crisisRating() {
    if (boughtDuringCrisis > 40 && money > totalMoneyEarned * 0.3) return "S";
    if (money > totalMoneyEarned * 0.4) return "A";
    if (money > totalMoneyEarned * 0.6) return "B";
    return "D";
  }

  function diversificationRating() {
    let active = producers.filter(p => p.owned > 0).length;
    if (active >= producers.length) return "S";
    if (active >= producers.length * 0.75) return "A";
    if (active >= producers.length * 0.5) return "B";
    return "C";
  }

  function finalTitle() {
    const g = growthRating(), c = crisisRating(), d = diversificationRating();
    if (g === "S" && c === "S") return "Untouchable Dynasty";
    if (c === "S") return "Crisis Predator";
    if (d === "S") return "Balanced Conglomerate";
    if (g === "A" || g === "S") return "Industrial Titan";
    return "Fragile Empire";
  }

  function finalScore() {
    return Math.floor(Math.log10(money + 1) * 100);
  }

  const ratings = translations.ratings[currentLang];
  const title = finalTitle();
  
  alert(`
ğŸ“Š ${currentLang === 'ko' ? 'ìµœì¢… í‰ê°€ â€” 2026' : 'FINAL EVALUATION â€” 2026'}

${ratings.labels.growth}: ${growthRating()}
${ratings.labels.efficiency}: ${efficiencyRating()}
${ratings.labels.crisis}: ${crisisRating()}
${ratings.labels.diversification}: ${diversificationRating()}

ğŸ† ${currentLang === 'ko' ? 'ì¹­í˜¸' : 'TITLE'}: ${ratings.titles[title]}

${currentLang === 'ko' ? 'ìµœì¢… ì ìˆ˜' : 'Final Score'}: ${finalScore()}
  `);
}

function updateDisplay() {
  // Update money and stats
  document.getElementById('money').textContent = formatNumber(money);
  document.getElementById('year').textContent = getFormattedDate();
  document.getElementById('era').textContent = getEra().name;
  document.getElementById('tps').textContent = formatNumber(tps);

  // Update producers
  let html = '';
  producers.forEach((p, i) => {
    const locked = currentYear < p.unlockYear;
    const cardClass = locked ? 'producer-card locked' : 'producer-card';
    const output = Math.floor(producerOutput(p));
    
    const costLabel = currentLang === 'ko' ? 'ë¹„ìš©' : 'Cost';
    const outputLabel = currentLang === 'ko' ? 'ìˆ˜ìµ' : 'Output';
    const lockedText = currentLang === 'ko' ? `${p.unlockYear}ë…„ ê°œë°©` : `Unlocks ${p.unlockYear}`;
    
    html += `
      <div class="${cardClass}" onclick="buy(${i})">
        <div class="producer-header">
          <div class="producer-name">${p.name}</div>
          <div class="producer-owned">${p.owned}</div>
        </div>
        <div class="producer-stats">
          <span class="producer-cost">${costLabel}: â‚©${formatNumber(p.cost)}</span>
          ${!locked ? `<span class="producer-output">${outputLabel}: +${formatNumber(output)}/s</span>` : `<span style="color: #999;">${lockedText}</span>`}
        </div>
      </div>
    `;
  });
  
  document.getElementById('producers').innerHTML = html;
}

function formatNumber(num) {
  if (num < 1000) return Math.floor(num).toLocaleString();
  if (num < 1e6) return Math.floor(num).toLocaleString();
  if (num < 1e9) return (num / 1e6).toFixed(2) + 'M';
  if (num < 1e12) return (num / 1e9).toFixed(2) + 'B';
  if (num < 1e15) return (num / 1e12).toFixed(2) + 'T';
  return num.toExponential(2);
}

// Game loop control
let yearInterval, passiveInterval;
let lastDisplayUpdate = 0;

function advanceTime() {
  currentWeek++;
  
  // Advance month after 4 weeks
  if (currentWeek > 4) {
    currentWeek = 1;
    currentMonth++;
    
    // Advance year after 12 months
    if (currentMonth > 12) {
      currentMonth = 1;
      currentYear++;
      
      // Check for newly unlocked producers at year change
      producers.forEach((p, i) => {
        if (p.unlockYear === currentYear) {
          setTimeout(() => {
            const cards = document.querySelectorAll('.producer-card');
            if (cards[i]) {
              cards[i].classList.add('newly-unlocked');
            }
          }, 100);
        }
      });
    }
  }
}

function updateMoneyDisplay() {
  // Only update money-related displays, not the entire producer grid
  document.getElementById('money').textContent = formatNumber(money);
  document.getElementById('tps').textContent = formatNumber(tps);
}

function startGameLoop() {
  // Week progression (main game tick)
  yearInterval = setInterval(() => {
    if (!gameOver) {
      advanceTime();
      
      tps = calculateTPS() * timeMultiplier();
      const weeklyGain = tps / 48; // 48 weeks per year
      money += weeklyGain;
      totalMoneyEarned += weeklyGain;
      
      checkCrisis();
      updateDisplay();
      
      if (currentYear >= endYear && currentMonth >= 12) {
        gameOver = true;
        setTimeout(showFinalRatings, 500);
      }
    }
  }, secondsPerWeek * 1000);

  // Passive TPS gain for smoothness (10 times per week)
  passiveInterval = setInterval(() => {
    if (!gameOver) {
      const passiveGain = (tps / 48) * 0.1; // 10% of weekly gain per tick
      money += passiveGain;
      totalMoneyEarned += passiveGain;
      updateMoneyDisplay(); // Only update money, not entire display
    }
  }, (secondsPerWeek * 1000) / 10);
}

// Initialize menu
updateDifficultyLabel();
</script>

</body>
</html>
